!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=238)}({12:function(e,t){e.exports=jQuery},121:function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},129:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var n=o(60),r=o(71),a=o(12),s=o.n(a),_=o(34),i=o(16),l=o(65);class u{updateWorkspaceUi(){s()("#new_password_tip").hide(),s()("#new_password").hide(),top.workspace&&(s()("#noteToolsBar").hide(),s()("#workspaceNoteBar").show()),this.updateUiFun&&this.updateUiFun()}register(e,t,o,n){this.getNoteFun=e,this.loadNoteFun=t,this.getSaveStatusFun=o,this.updateUiFun=n}checkAndInitWorkspace(e){if(!e)return!1;let t=decodeURI(e.substr(1)),o=t.match(/^\/*w\/+(\w+)\/*(.*)/);if(o&&3===o.length){if(t=o[2]){let r=o[1];return r=r.substring(0,8),t=t.replace(/\W/g,"").substring(0,16),e=n.d(r,t),window.location.hash=e,this.openWorkspace(e),!0}throw window.location.href="/mind#"+o[1],"redirect page to mind"}}openWorkspace(e){let t=this;this.getNoteFun().setTitle(e),this.loadPwdFromLocal(),this.updateWorkspaceUi();let o=window.parent.workspace;o&&(this.getNoteFun().setQueryPassword(o.getPassword()),window.getSaveStatus=this.getSaveStatusFun),this.loadNoteFun().then(e=>{if(e.isNew&&o&&t.getNoteFun().setPassword(o.getPassword()).setLockType(o.getLockType()).setQueryPassword(o.getPassword()),window.parent.updateHasNoteFun){let e=window.parent.updateHasNoteFun,o=!!t.getNoteFun().getContent();l.AppEventInstance.on(l.EventType.NoteChanged,()=>{let n=t.getNoteFun();n.getContent()&&!1===o?(e(n.getTitle(),!0),o=!0):n.getContent()||!0!==o||(e(n.getTitle(),!1),o=!1)})}}),o||Object(r.d)(this.getNoteFun().getTitle())}loadPwdFromLocal(){let e=this.getNoteFun(),t=Object(_.a)(e.getTitle());t&&e.setQueryPassword(new i.Note(JSON.parse(t)).getQueryPassword())}registerIframeEvent(e){if(window.parent.globalKeyDownEvent&&e){let t=window.parent.globalKeyDownEvent;s()(e).ready(()=>{s()(e.contentWindow).on("keydown",e=>{t(e)})})}}}},16:function(e,t,o){"use strict";o.r(t),o.d(t,"SERVER_PATH",function(){return r}),o.d(t,"COOLAB_SERVER_PATH",function(){return s}),o.d(t,"CONFIG",function(){return a}),o.d(t,"Note",function(){return _}),o.d(t,"Response",function(){return i});const n="//api.notelive.cn",r={renderPrefix:n+"/render/",queryOne:n+"/server/queryOne",replaceOrInsertOne:n+"/server/replaceOrInsertOne",modifyWorkspacePwd:n+"/server/modifyWorkspacePwd",delWorkspace:n+"/server/delWorkspace",queryWorkspaceTitles:n+"/server/queryWorkspaceTitles"},a={responseCode:{SUCCESS:200,NO_AUTH:505,ERROR:500},workspaceTitlePrefix:"/w/",siteNoteTitle:"note live - 在线记事本",siteFlowTitle:"note live - 在线流程图",flowDefaultData:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="203px" height="64px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36&quot; version=&quot;@DRAWIO-VERSION@&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;14058d99-db58-e9f5-3aba-399879c13e25&quot; name=&quot;Page-1&quot;&gt;jZNNk4MgDIZ/jXeVbbe91n5d9tTDnimmwhSNg1jt/vpFCVWnszPLBfIkIfgmRiwr+5PhtfzCHHSUxnkfsX2Upkm62rhtIE9Pth8rDwqjcgqawEX9AMGYaKtyaBaBFlFbVS+hwKoCYReMG4PdMuyGelm15gW8gYvg+p1+q9xKTzfpeuJnUIUMlZP11nuuXNwLg21F9aKU3cbl3SUPd9GHNpLn2M0QO0QsM4jWn8o+Az1oG2Tzecc/vK93G6jsfxJY/OlTHly39PF7bK9OCKeuVuLudgkG6Ln2GSTqpLJwqbkY7M6NQcR20pbaWYk73rCyR14qPUzAGfQDrBKcHNTwZBNsunZIHMWDnCxuBAWvYgrOUKMZ38DicTmOhldDR3eF5k1Due9akDwPMBb6GSJtToAlWPN0IeR1JXxKmGMyu2ko0piYnA3EmhinOSxeN0+9cAdqRzCnto++2b/FDr8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffcd28-1-ffa500-1-s-0"><stop offset="0%" style="stop-color:#FFCD28"/><stop offset="100%" style="stop-color:#FFA500"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffffff-0.9-ffffff-0.1-s-0"><stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/><stop offset="100%" style="stop-color:#ffffff;stop-opacity:0.1"/></linearGradient></defs><g transform="translate(0.5,0.5)"><rect x="0" y="0" width="200" height="60" rx="30" ry="30" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="0" y="0" width="200" height="60" rx="30" ry="30" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="none"/><path d="M 31.5 -1 Q -1 -1 -1 31.5 L -1 24 Q 100 42 201 24 L 201 31.5 Q 201 -1 168.5 -1 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(24.5,20.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="150" height="19" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 150px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Double click here</div></div></foreignObject><text x="75" y="19" fill="#000000" text-anchor="middle" font-size="18px" font-family="Helvetica" font-weight="bold">Double click here</text></switch></g></g></svg>',enableCoolab:!0},s=n+"/coolab";class _{constructor(e){return e&&(this.id=e.id,this.title=e.title,this.queryPassword=e.queryPassword,this.password=e.password,this.content=e.content,this.contentType=e.contentType,this.lockType=e.lockType,this.updateTime=e.updateTime),this.contentType||(this.contentType="markdown"),this}getTitle(){return this.title}getContent(){return this.content||""}getQueryPassword(){return this.queryPassword}getPassword(){return this.password}getContentType(){return this.contentType}getLockType(){return this.lockType}getUpdateTime(){return this.updateTime}setTitle(e){return this.title=e,this}setContent(e){return this.content=e,this}setQueryPassword(e){return this.queryPassword=e,this}setPassword(e){return this.password=e,this}setContentType(e){return this.contentType=e,this}setLockType(e){return this.lockType=e,this}setUpdateTime(e){return this.updateTime=e,this}}class i{constructor(e){return e&&(this.code=e.code,this.msg=e.msg,this.data=e.data),this}getCode(){return this.code}getMsg(){return this.msg}getData(){return this.data}getNote(){return new _(this.data)}}},190:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){"use strict";var _Base64=(global=global||{}).Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},o=0,n=e.length;o<n;o++)t[e.charAt(o)]=o;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],o=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),n=[b64chars.charAt(o>>>18),b64chars.charAt(o>>>12&63),t>=2?"=":b64chars.charAt(o>>>6&63),t>=1?"=":b64chars.charAt(63&o)];return n.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return fromCharCode(55296+(o>>>10))+fromCharCode(56320+(1023&o));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,o=t%4,n=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),r=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return r.length-=[0,0,2,1][o],r.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}global.Meteor&&(Base64=global.Base64);module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));return{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}).call(this,__webpack_require__(121))},238:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _assets_flow_css__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(415),_assets_flow_css__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_assets_flow_css__WEBPACK_IMPORTED_MODULE_0__),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),_config__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_workspace_workspace_support__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(129),_global_event__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65),_global_event__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_global_event__WEBPACK_IMPORTED_MODULE_4__),js_base64__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(190),js_base64__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(js_base64__WEBPACK_IMPORTED_MODULE_5__);let draw_url="https://www.draw.io/?embed=1&ui=atlas&spin=1&modified=unsavedChanges&proto=json",note,content_obj,tip_obj,password_obj,password_div_obj,password_btn_obj,newPassword_obj,newPassword_div_obj,newPassword_btn_obj,newPassword_cancel_obj,lockType_obj,readonly_btn_obj,authQuery=!0,onEdit=!1,saveFailedCallback=e=>{},workspaceSupport=new _workspace_workspace_support__WEBPACK_IMPORTED_MODULE_3__.a;function buildDrawUrl(e="atlas"){draw_url="https://www.draw.io/?embed=1&ui="+e+"&spin=1&modified=unsavedChanges&proto=json"}function editDiagram(){let e=content_obj.html();content_obj.html('<img src="http://www.draw.io/images/ajax-loader.gif" style="max-width: 100%;cursor: pointer;">');let t=document.createElement("iframe");t.setAttribute("frameborder","0");saveFailedCallback=(e=>{t.contentWindow.postMessage(JSON.stringify({action:"status",message:e,modified:!0}),"*")});let o=function(n){if(n.data.length>0){let r=JSON.parse(n.data);if("init"===r.event){content_obj.html(e);let o=(new XMLSerializer).serializeToString(content_obj[0].firstChild);t.contentWindow.postMessage(JSON.stringify({action:"load",xml:o}),"*")}else if("export"===r.event){let e=js_base64__WEBPACK_IMPORTED_MODULE_5__.Base64.decode(r.data.substring(r.data.indexOf(",")+1));content_obj.html(e),save()}else"save"===r.event?t.contentWindow.postMessage(JSON.stringify({action:"export",format:"xmlsvg",spin:"Updating page"}),"*"):"exit"===r.event&&(document.body.removeChild(t),window.removeEventListener("message",o),onEdit=!1)}};window.addEventListener("message",o),t.setAttribute("src",draw_url),document.body.appendChild(t),onEdit=!0}function bindPwdEvent(){password_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#password"),password_div_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#password_div"),password_btn_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#password_btn"),readonly_btn_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#readonly_btn"),newPassword_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#new_password"),newPassword_div_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#new_password_div"),newPassword_btn_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#new_password_btn"),newPassword_cancel_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#new_password_cancel"),lockType_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#lockType");let e=function(){note.setPassword(password_obj.val()).setQueryPassword(password_obj.val()),closePasswordQueryBox(),authQuery?loadNote():replaceOrInsertOne(note)};password_obj.on("keypress",function(t){13===t.keyCode&&e()}),password_btn_obj.on("click",e),readonly_btn_obj.on("click",()=>{note.setQueryPassword(null),closePasswordQueryBox(),window.location.reload()}),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#modify_password").on("click",showPasswordModifyBox),newPassword_btn_obj.on("click",function(){note.setPassword(newPassword_obj.val()),note.getPassword()?note.setLockType(lockType_obj.val()):note.setLockType(null),save(),note.setQueryPassword(newPassword_obj.val()),content_obj.removeAttr("disabled"),newPassword_div_obj.hide()}),newPassword_cancel_obj.on("click",function(){content_obj.removeAttr("disabled"),newPassword_div_obj.hide()})}function showPasswordQueryBox(e=!0){(authQuery=e)?readonly_btn_obj.hide():readonly_btn_obj.show(),password_div_obj.show(),password_obj.focus()}function closePasswordQueryBox(){password_div_obj.hide(),password_obj.val("")}function showPasswordModifyBox(){content_obj.attr("disabled",!0),newPassword_div_obj.show(),newPassword_obj.focus(),newPassword_obj.val(note.getPassword()),lockType_obj.val(note.getLockType()||"rw")}function status2saved(){tip_obj.html("已保存")}function status2deleted(){tip_obj.html("已删除")}function status2error(e){tip_obj.html("<font style='color:red'>"+e+"</font>")}function status2notConnect(){status2error("保存失败，服务器连接失败")}function loadNote(){return new Promise(e=>{jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajax({type:"POST",url:_config__WEBPACK_IMPORTED_MODULE_2__.SERVER_PATH.queryOne,data:{title:note.getTitle(),queryPassword:note.getQueryPassword()},success:function(t){if(t){let o=new _config__WEBPACK_IMPORTED_MODULE_2__.Response(t);if(o.getCode()===_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.responseCode.SUCCESS){if(content_obj.show(),password_div_obj.hide(),o.getData()){let e=note.getQueryPassword();(note=o.getNote()).setQueryPassword(e),note.setPassword(e),tip_obj.val(note.getTitle()),content_obj.html(note.getContent())}note.getContent()||content_obj.html(_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.flowDefaultData),e(!0)}else o.getCode()===_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.responseCode.NO_AUTH?showPasswordQueryBox(!0):(console.error(o),status2error("读取数据错误,"+o.getMsg()))}e()},error:function(t){console.error(t),status2error("读取数据失败,服务器连接失败"),e()}})})}function save(){note.setContent(content_obj.html()),replaceOrInsertOne(note)}function delData(){content_obj.html(_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.flowDefaultData),note.setContent(null),replaceOrInsertOne(note,!0)}function replaceOrInsertOne(e,t=!1){jquery__WEBPACK_IMPORTED_MODULE_1___default.a.ajax({type:"POST",url:_config__WEBPACK_IMPORTED_MODULE_2__.SERVER_PATH.replaceOrInsertOne,data:e,success:function(o){if(o){let n=new _config__WEBPACK_IMPORTED_MODULE_2__.Response(o);n.getCode()===_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.responseCode.SUCCESS?(t?status2deleted():status2saved(),_global_event__WEBPACK_IMPORTED_MODULE_4__.AppEventInstance.emit(_global_event__WEBPACK_IMPORTED_MODULE_4__.EventType.NoteChanged,e.getContent()),console.log("update data")):n.getCode()===_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.responseCode.NO_AUTH?showPasswordQueryBox(!1):(console.error(n),status2error("保存失败，"+n.getMsg()))}},error:function(e){e&&413===e.status?(tip_obj.html("<span style='color: red'>保存失败，超过长度限制</span>"),saveFailedCallback("保存失败，超过长度限制")):(console.error(e),status2notConnect(),saveFailedCallback("保存失败，服务器连接失败"))}})}function getQueryString(e){let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=decodeURI(window.location.search).substr(1).match(t);return null!=o?unescape(o[2]):null}function setUiStyle(){let e=getQueryString("ui");"view"===e&&(jquery__WEBPACK_IMPORTED_MODULE_1___default()("#controls").hide(),content_obj.off("dblclick")),"min"===e&&(jquery__WEBPACK_IMPORTED_MODULE_1___default()("#controls").hide(),buildDrawUrl("min"))}function init(){content_obj.html(""),note=new _config__WEBPACK_IMPORTED_MODULE_2__.Note,setUiStyle();let e="#",t=decodeURI(location.hash.substr(1));if(void 0===t||null==t||""===t){let o=getQueryString("t");null!==o&&(e="?t="),o&&(t=o)}if(!workspaceSupport.checkAndInitWorkspace(t)){if(void 0===t||null==t||""===t)t=randomString(4),note.setTitle(t),console.log("random title:"+t),window.location.href=e+t;else{console.log("load from :"+t);let o=t;t=t.replace(/\W/g,"").substring(0,8),"#"===e?window.location.hash=t:t!==o&&(window.location.href=changeUrlArg(window.location.href,"t",t)),document.title=t+" @"+_config__WEBPACK_IMPORTED_MODULE_2__.CONFIG.siteFlowTitle,note.setTitle(t),loadNote()}jquery__WEBPACK_IMPORTED_MODULE_1___default()("#preview_a").attr("href","?t="+t+"&ui=view")}}function changeUrlArg(url,arg,val){let pattern=arg+"=([^&]*)",replaceText=arg+"="+val;return url.match(pattern)?url.replace(eval("/("+arg+"=)([^&]*)/gi"),replaceText):url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}function randomString(e){e=e||32;const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",o=t.length;let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*o));return n}workspaceSupport.register(()=>note,()=>loadNote(),()=>onEdit?"当前工作流编辑器尚未退出，确定已保存好文档并退出吗？":1,()=>{jquery__WEBPACK_IMPORTED_MODULE_1___default()("#preview_a").attr("href","?t="+note.getTitle()+"&ui=view")}),jquery__WEBPACK_IMPORTED_MODULE_1___default()(function(){content_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#diagram"),tip_obj=jquery__WEBPACK_IMPORTED_MODULE_1___default()("#tip"),content_obj.on("dblclick",editDiagram),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#editDiagram").on("click",editDiagram),jquery__WEBPACK_IMPORTED_MODULE_1___default()("#delete_data").on("click",delData),init(),window.onhashchange=(()=>location.reload()),bindPwdEvent()})},34:function(e,t,o){"use strict";o.d(t,"c",function(){return r}),o.d(t,"a",function(){return s}),o.d(t,"b",function(){return a});const n="note.local.notes.";function r(e){let t=_(e.getTitle());void 0===e.getContent()||null===e.getContent()||""===e.getContent()?(localStorage.removeItem(t),console.log("remove note from localStorage:"+e.getTitle())):localStorage.setItem(t,JSON.stringify(e))}function a(e){localStorage.removeItem(_(e))}function s(e){return localStorage.getItem(_(e))}function _(e){return n+e}},415:function(e,t){},60:function(e,t,o){"use strict";o.d(t,"f",function(){return a}),o.d(t,"g",function(){return s}),o.d(t,"c",function(){return _}),o.d(t,"d",function(){return i}),o.d(t,"a",function(){return l}),o.d(t,"b",function(){return u}),o.d(t,"e",function(){return c});var n=o(16);function r(e){e=e||32;const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",o=t.length;let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*o));return n}function a(){return r(4)}function s(){return r(4)}function _(e){let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=decodeURI(window.location.search).substr(1).match(t);return null!=o?unescape(o[2]):null}function i(e,t){return n.CONFIG.workspaceTitlePrefix+e+"/"+t}function l(e,t){let o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in o)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?o[t]:("00"+o[t]).substr((""+o[t]).length)));return e}function u(e){if(!e)return null;let t=e.match(/^\/*w\/+\w+\/+(\w+)/);return t&&2===t.length?t[1]:null}function c(e,t){return e&&-1!==e.indexOf("w")&&!t}},65:function(e,t){let o=null;o||(o=new class{constructor(){let e=this;e.app_events={},e.emit=function(t,o){let n=e.app_events[t];if(n&&n.length)for(let e=0;e<n.length;e++)if(n[e])try{n[e](o)}catch(e){console.error(t+": Listener ERROR",e)}},e.on=function(t,o){e.app_events[t]||(e.app_events[t]=[]),e.app_events[t].push(o)},e.off=function(t,o){let n=e.app_events[t];if(n&&n.length){let e=n.indexOf(o);n.splice(e,1)}}}}),e.exports={EventType:{WindowKeydown:"WindowKeydown",NoteChanged:"NoteChanged",jsMindSelectNode:"jsMindSelectNode"},AppEventInstance:o}},71:function(e,t,o){"use strict";o.d(t,"a",function(){return s}),o.d(t,"b",function(){return _}),o.d(t,"d",function(){return i}),o.d(t,"c",function(){return l});const n='<pre>-&emsp;<a href="{{title}}">{{title}}</a>&emsp;&emsp;[<span class="removeHistory" data="{{title}}" style="color:dodgerblue;text-decoration: underline;cursor: pointer">x</span>]</pre>',r="note.titles";function a(){let e,t=localStorage.getItem(r);return e=t?JSON.parse(t):[]}function s(){return a().map(e=>n.replace(/{{title}}/g,"#"+e)).join("")}function _(){return a()[0]}function i(e){u([e].concat(a().filter(t=>t!==e)))}function l(e){u(a().filter(t=>t!==e))}function u(e){localStorage.setItem(r,JSON.stringify(e))}}});