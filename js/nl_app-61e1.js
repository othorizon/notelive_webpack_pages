!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=269)}({12:function(t,e){t.exports=jQuery},121:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},129:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(60),o=n(71),i=n(12),s=n.n(i),u=n(34),c=n(16),a=n(65);class l{updateWorkspaceUi(){s()("#new_password_tip").hide(),s()("#new_password").hide(),top.workspace&&(s()("#noteToolsBar").hide(),s()("#workspaceNoteBar").show()),this.updateUiFun&&this.updateUiFun()}register(t,e,n,r){this.getNoteFun=t,this.loadNoteFun=e,this.getSaveStatusFun=n,this.updateUiFun=r}checkAndInitWorkspace(t){if(!t)return!1;let e=decodeURI(t.substr(1)),n=e.match(/^\/*w\/+(\w+)\/*(.*)/);if(n&&3===n.length){if(e=n[2]){let o=n[1];return o=o.substring(0,8),e=e.replace(/\W/g,"").substring(0,16),t=r.d(o,e),window.location.hash=t,this.openWorkspace(t),!0}throw window.location.href="/mind#"+n[1],"redirect page to mind"}}openWorkspace(t){let e=this;this.getNoteFun().setTitle(t),this.loadPwdFromLocal(),this.updateWorkspaceUi();let n=window.parent.workspace;n&&(this.getNoteFun().setQueryPassword(n.getPassword()),window.getSaveStatus=this.getSaveStatusFun),this.loadNoteFun().then(t=>{if(t.isNew&&n&&e.getNoteFun().setPassword(n.getPassword()).setLockType(n.getLockType()).setQueryPassword(n.getPassword()),window.parent.updateHasNoteFun){let t=window.parent.updateHasNoteFun,n=!!e.getNoteFun().getContent();a.AppEventInstance.on(a.EventType.NoteChanged,()=>{let r=e.getNoteFun();r.getContent()&&!1===n?(t(r.getTitle(),!0),n=!0):r.getContent()||!0!==n||(t(r.getTitle(),!1),n=!1)})}}),n||Object(o.d)(this.getNoteFun().getTitle())}loadPwdFromLocal(){let t=this.getNoteFun(),e=Object(u.a)(t.getTitle());e&&t.setQueryPassword(new c.Note(JSON.parse(e)).getQueryPassword())}registerIframeEvent(t){if(window.parent.globalKeyDownEvent&&t){let e=window.parent.globalKeyDownEvent;s()(t).ready(()=>{s()(t.contentWindow).on("keydown",t=>{e(t)})})}}}},16:function(t,e,n){"use strict";n.r(e),n.d(e,"SERVER_PATH",function(){return o}),n.d(e,"COOLAB_SERVER_PATH",function(){return s}),n.d(e,"CONFIG",function(){return i}),n.d(e,"Note",function(){return u}),n.d(e,"Response",function(){return c});const r="//api.notelive.cn",o={renderPrefix:r+"/render/",queryOne:r+"/server/queryOne",replaceOrInsertOne:r+"/server/replaceOrInsertOne",modifyWorkspacePwd:r+"/server/modifyWorkspacePwd",delWorkspace:r+"/server/delWorkspace",queryWorkspaceTitles:r+"/server/queryWorkspaceTitles"},i={responseCode:{SUCCESS:200,NO_AUTH:505,ERROR:500},workspaceTitlePrefix:"/w/",siteNoteTitle:"note live - 在线记事本",siteFlowTitle:"note live - 在线流程图",flowDefaultData:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="203px" height="64px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36&quot; version=&quot;@DRAWIO-VERSION@&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;14058d99-db58-e9f5-3aba-399879c13e25&quot; name=&quot;Page-1&quot;&gt;jZNNk4MgDIZ/jXeVbbe91n5d9tTDnimmwhSNg1jt/vpFCVWnszPLBfIkIfgmRiwr+5PhtfzCHHSUxnkfsX2Upkm62rhtIE9Pth8rDwqjcgqawEX9AMGYaKtyaBaBFlFbVS+hwKoCYReMG4PdMuyGelm15gW8gYvg+p1+q9xKTzfpeuJnUIUMlZP11nuuXNwLg21F9aKU3cbl3SUPd9GHNpLn2M0QO0QsM4jWn8o+Az1oG2Tzecc/vK93G6jsfxJY/OlTHly39PF7bK9OCKeuVuLudgkG6Ln2GSTqpLJwqbkY7M6NQcR20pbaWYk73rCyR14qPUzAGfQDrBKcHNTwZBNsunZIHMWDnCxuBAWvYgrOUKMZ38DicTmOhldDR3eF5k1Due9akDwPMBb6GSJtToAlWPN0IeR1JXxKmGMyu2ko0piYnA3EmhinOSxeN0+9cAdqRzCnto++2b/FDr8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffcd28-1-ffa500-1-s-0"><stop offset="0%" style="stop-color:#FFCD28"/><stop offset="100%" style="stop-color:#FFA500"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffffff-0.9-ffffff-0.1-s-0"><stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/><stop offset="100%" style="stop-color:#ffffff;stop-opacity:0.1"/></linearGradient></defs><g transform="translate(0.5,0.5)"><rect x="0" y="0" width="200" height="60" rx="30" ry="30" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="0" y="0" width="200" height="60" rx="30" ry="30" fill="url(#mx-gradient-ffcd28-1-ffa500-1-s-0)" stroke="#d79b00" pointer-events="none"/><path d="M 31.5 -1 Q -1 -1 -1 31.5 L -1 24 Q 100 42 201 24 L 201 31.5 Q 201 -1 168.5 -1 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(24.5,20.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="150" height="19" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 150px; white-space: nowrap; word-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Double click here</div></div></foreignObject><text x="75" y="19" fill="#000000" text-anchor="middle" font-size="18px" font-family="Helvetica" font-weight="bold">Double click here</text></switch></g></g></svg>',enableCoolab:!0},s=r+"/coolab";class u{constructor(t){return t&&(this.id=t.id,this.title=t.title,this.queryPassword=t.queryPassword,this.password=t.password,this.content=t.content,this.contentType=t.contentType,this.lockType=t.lockType,this.updateTime=t.updateTime),this.contentType||(this.contentType="markdown"),this}getTitle(){return this.title}getContent(){return this.content||""}getQueryPassword(){return this.queryPassword}getPassword(){return this.password}getContentType(){return this.contentType}getLockType(){return this.lockType}getUpdateTime(){return this.updateTime}setTitle(t){return this.title=t,this}setContent(t){return this.content=t,this}setQueryPassword(t){return this.queryPassword=t,this}setPassword(t){return this.password=t,this}setContentType(t){return this.contentType=t,this}setLockType(t){return this.lockType=t,this}setUpdateTime(t){return this.updateTime=t,this}}class c{constructor(t){return t&&(this.code=t.code,this.msg=t.msg,this.data=t.data),this}getCode(){return this.code}getMsg(){return this.msg}getData(){return this.data}getNote(){return new u(this.data)}}},161:function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,a=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?a=c.concat(a):f=-1,a.length&&d())}function d(){if(!l){var t=u(p);l=!0;for(var e=a.length;e;){for(c=a,a=[];++f<e;)c&&c[f].run();f=-1,e=a.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function h(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new g(t,e)),1!==a.length||l||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},191:function(t,e,n){"use strict";(function(e){var r=n(242);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var s=n(243),u=Object.prototype.hasOwnProperty,c=Array.prototype.slice,a="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function f(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var p=t.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function g(t){if(s.isFunction(t)){if(a)return t.name;var e=t.toString().match(d);return e&&e[1]}}function h(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function y(t){if(a||!s.isFunction(t))return s.inspect(t);var e=g(t);return"[Function"+(e?": "+e:"")+"]"}function w(t,e,n,r,o){throw new p.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function m(t,e){t||w(t,!0,e,"==",p.ok)}function b(t,e,n,r){if(t===e)return!0;if(i(t)&&i(e))return 0===o(t,e);if(s.isDate(t)&&s.isDate(e))return t.getTime()===e.getTime();if(s.isRegExp(t)&&s.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===o(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(s.isPrimitive(t)||s.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=v(t),i=v(e);if(o&&!i||!o&&i)return!1;if(o)return t=c.call(t),e=c.call(e),b(t,e,n);var u,a,l=T(t),f=T(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),a=l.length-1;a>=0;a--)if(l[a]!==f[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!b(t[u],e[u],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function O(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&w(o,n,"Missing expected exception"+r);var i="string"==typeof r,u=!t&&s.isError(o),c=!t&&o&&!n;if((u&&i&&O(o,n)||c)&&w(o,n,"Got unwanted exception"+r),t&&o&&n&&!O(o,n)||!t&&o)throw o}p.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(y((e=this).actual),128)+" "+e.operator+" "+h(y(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||w;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var o=r.stack,i=g(n),s=o.indexOf("\n"+i);if(s>=0){var u=o.indexOf("\n",s+1);o=o.substring(u+1)}this.stack=o}}},s.inherits(p.AssertionError,Error),p.fail=w,p.ok=m,p.equal=function(t,e,n){t!=e&&w(t,e,n,"==",p.equal)},p.notEqual=function(t,e,n){t==e&&w(t,e,n,"!=",p.notEqual)},p.deepEqual=function(t,e,n){b(t,e,!1)||w(t,e,n,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(t,e,n){b(t,e,!0)||w(t,e,n,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(t,e,n){b(t,e,!1)&&w(t,e,n,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function t(e,n,r){b(e,n,!0)&&w(e,n,r,"notDeepStrictEqual",t)},p.strictEqual=function(t,e,n){t!==e&&w(t,e,n,"===",p.strictEqual)},p.notStrictEqual=function(t,e,n){t===e&&w(t,e,n,"!==",p.notStrictEqual)},p.throws=function(t,e,n){x(!0,t,e,n)},p.doesNotThrow=function(t,e,n){x(!1,t,e,n)},p.ifError=function(t){if(t)throw t},p.strict=r(function t(e,n){e||w(e,!0,n,"==",t)},p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var T=Object.keys||function(t){var e=[];for(var n in t)u.call(t,n)&&e.push(n);return e}}).call(this,n(121))},242:function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var a in n=Object(arguments[c]))o.call(n,a)&&(u[a]=n[a]);if(r){s=r(n);for(var l=0;l<s.length;l++)i.call(n,s[l])&&(u[s[l]]=n[s[l]])}}return u}},243:function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},o=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),c=r[n];n<i;c=r[++n])h(c)||!v(c)?s+=" "+c:s+=" "+u(c);return s},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,s={};function u(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,t,r.depth)}function c(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function a(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return w(o)||(o=l(t,o,r)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(w(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(h(e))return t.stylize("null","null")}(t,n);if(i)return i;var s=Object.keys(n),u=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(T(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var a,v="",E=!1,S=["{","}"];(d(n)&&(E=!0,S=["[","]"]),T(n))&&(v=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(v=" "+RegExp.prototype.toString.call(n)),O(n)&&(v=" "+Date.prototype.toUTCString.call(n)),x(n)&&(v=" "+f(n)),0!==s.length||E&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),a=E?function(t,e,n,r,o){for(var i=[],s=0,u=e.length;s<u;++s)P(e,String(s))?i.push(p(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))}),i}(t,n,r,u,s):s.map(function(e){return p(t,n,r,u,e,E)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(a,v,S)):S[0]+v+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),P(r,o)||(s="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=h(n)?l(t,c.value,null):l(t,c.value,n-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function h(t){return null===t}function y(t){return"number"==typeof t}function w(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===E(t)}function v(t){return"object"==typeof t&&null!==t}function O(t){return v(t)&&"[object Date]"===E(t)}function x(t){return v(t)&&("[object Error]"===E(t)||t instanceof Error)}function T(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(m(i)&&(i=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else s[n]=function(){};return s[n]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=g,e.isNull=h,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=w,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=v,e.isDate=O,e.isError=x,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(244);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":"),[t.getDate(),j[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(245),e._extend=function(t,e){if(!e||!v(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(k&&t[k]){var e;if("function"!=typeof(e=t[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(t,r){t?n(t):e(r)});try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),k&&Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=k,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};e.apply(this,n).then(function(e){t.nextTick(s,null,e)},function(e){t.nextTick(C,e,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(161))},244:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},245:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},269:function(t,e,n){"use strict";n.r(e);n(417);var r=n(12),o=n.n(r),i=n(191),s=n.n(i),u=n(16),c=n(60);var a=n(34),l=n(129),f=n(65);let p,d,g,h,y,w,m=!0,b=new l.a;function v(t=!0){(m=t)?w.hide():w.show(),h.show(),y.focus()}function O(){h.hide(),y.val("")}function x(){if(O(),g=new u.Note,b.checkAndInitWorkspace(location.hash))return;let t=location.hash;void 0===t||null==t||""===t?(t=c.f(),console.log("random title:"+t)):(console.log("load from hash:"+t),t=decodeURI(t.substr(1)).replace(/\W/g,"").substring(0,8)),window.location.hash=t,g.setTitle(t),function(){let t=Object(a.a)(g.getTitle());t&&g.setQueryPassword(new u.Note(JSON.parse(t)).getQueryPassword())}()}function T(){return new Promise(t=>{o.a.ajax({type:"POST",url:u.SERVER_PATH.queryOne,data:{title:g.getTitle(),queryPassword:g.getQueryPassword()},success:function(e){if(e){let n=new u.Response(e);if(n.getCode()===u.CONFIG.responseCode.SUCCESS){if(n.getData()){let t=g.getQueryPassword();(g=n.getNote()).setQueryPassword(t),g.setPassword(t),S({status:"ok",data:{title:g.getTitle(),content:g.getContent(),contentType:g.getContentType()}})}else S({status:"not_exist",msg:"数据不存在"});Object(a.c)(g),t(!0)}else n.getCode()===u.CONFIG.responseCode.NO_AUTH?v(!0):(console.error(n),S({status:"error",msg:n.getMsg()}))}t()},error:function(e){console.error(e),S({status:"error",msg:"读取数据错误"}),t()}})})}function E(t){return"string"==typeof t&&(t={content:t}),s.a.ok("object"==typeof t,"data are required"),g.setContent(t.content),g.setContentType(t.contentType||"txt"),new Promise((t,e)=>{o.a.ajax({type:"POST",url:u.SERVER_PATH.replaceOrInsertOne,data:g,success:function(n){if(n){let r=new u.Response(n);r.getCode()===u.CONFIG.responseCode.SUCCESS?(f.AppEventInstance.emit(f.EventType.NoteChanged,g.getContent()),t()):r.getCode()===u.CONFIG.responseCode.NO_AUTH?v(!1):(console.error(r),e({status:"error",msg:r.getMsg()}))}else e({status:"error",msg:"读取数据错误"})},error:function(t){console.error(t),e({status:"error",msg:"读取数据错误"})}})})}function S(t){d.eventEmitter.emit("LOAD_DATA",t)}b.register(()=>g,()=>T(),()=>1),o()(function(){d=new class{constructor(){let t=this;t.app_events={},t.eventEmitter={},t.eventEmitter.emit=function(e,n){let r=t.app_events[e];if(r&&r.length)for(let t=0;t<r.length;t++)if(r[t])try{r[t](n)}catch(t){console.error(e+": Listener ERROR",t)}},t.eventListener={},t.eventListener.on=function(e,n){t.app_events[e]||(t.app_events[e]=[]),t.app_events[e].push(n)},t.eventListener.remove=function(e,n){let r=t.app_events[e];if(r&&r.length){let t=r.indexOf(n);r.splice(t,1)}}}},function(){y=o()("#password"),h=o()("#password_div"),w=o()("#readonly_btn");let t=o()("#password_btn"),e=function(){g.setQueryPassword(y.val()),O(),m?T():E(g)};y.on("keypress",function(t){13===t.keyCode&&e()}),t.on("click",e),w.on("click",()=>{O(),T()})}(),p=o()("#templateBody");let t=c.c("tid");var e;t?(document.title=t+" @ note live - App Beta",x(),window.onhashchange=(()=>{x(),T()}),(e=t,new Promise((t,n)=>{o.a.ajax({type:"POST",url:u.SERVER_PATH.queryOne,data:{title:e},success:function(e){if(e){let r=new u.Response(e);r.getCode()===u.CONFIG.responseCode.SUCCESS?r.getData()?t(r.getNote().getContent()):n("模板不存在"):r.getCode()===u.CONFIG.responseCode.NO_AUTH?n("模板需要授权"):(console.error(r),n("读取模板数据错误"))}},error:function(t){console.error(t),n("读取模板数据错误")}})})).then(t=>{let e=document.createElement("iframe");e.setAttribute("frameborder","0"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),document.getElementById("templateBody").appendChild(e),e.contentWindow.nlApp={get onLoadData(){return function(t){d.eventListener.on("LOAD_DATA",t)}},get saveData(){return function(t){return E(t)}},get refreshData(){return function(){T()}}},e.contentDocument.open(),e.contentDocument.write(t),e.contentDocument.close(),b.registerIframeEvent(e),T()}).catch(t=>{p.html(t)})):p.html("模板不存在")})},34:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i});const r="note.local.notes.";function o(t){let e=u(t.getTitle());void 0===t.getContent()||null===t.getContent()||""===t.getContent()?(localStorage.removeItem(e),console.log("remove note from localStorage:"+t.getTitle())):localStorage.setItem(e,JSON.stringify(t))}function i(t){localStorage.removeItem(u(t))}function s(t){return localStorage.getItem(u(t))}function u(t){return r+t}},417:function(t,e){},60:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return f});var r=n(16);function o(t){t=t||32;const e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length;let r="";for(let o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r}function i(){return o(4)}function s(){return o(4)}function u(t){let e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=decodeURI(window.location.search).substr(1).match(e);return null!=n?unescape(n[2]):null}function c(t,e){return r.CONFIG.workspaceTitlePrefix+t+"/"+e}function a(t,e){let n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in n)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t}function l(t){if(!t)return null;let e=t.match(/^\/*w\/+\w+\/+(\w+)/);return e&&2===e.length?e[1]:null}function f(t,e){return t&&-1!==t.indexOf("w")&&!e}},65:function(t,e){let n=null;n||(n=new class{constructor(){let t=this;t.app_events={},t.emit=function(e,n){let r=t.app_events[e];if(r&&r.length)for(let t=0;t<r.length;t++)if(r[t])try{r[t](n)}catch(t){console.error(e+": Listener ERROR",t)}},t.on=function(e,n){t.app_events[e]||(t.app_events[e]=[]),t.app_events[e].push(n)},t.off=function(e,n){let r=t.app_events[e];if(r&&r.length){let t=r.indexOf(n);r.splice(t,1)}}}}),t.exports={EventType:{WindowKeydown:"WindowKeydown",NoteChanged:"NoteChanged",jsMindSelectNode:"jsMindSelectNode"},AppEventInstance:n}},71:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return a});const r='<pre>-&emsp;<a href="{{title}}">{{title}}</a>&emsp;&emsp;[<span class="removeHistory" data="{{title}}" style="color:dodgerblue;text-decoration: underline;cursor: pointer">x</span>]</pre>',o="note.titles";function i(){let t,e=localStorage.getItem(o);return t=e?JSON.parse(e):[]}function s(){return i().map(t=>r.replace(/{{title}}/g,"#"+t)).join("")}function u(){return i()[0]}function c(t){l([t].concat(i().filter(e=>e!==t)))}function a(t){l(i().filter(e=>e!==t))}function l(t){localStorage.setItem(o,JSON.stringify(t))}}});